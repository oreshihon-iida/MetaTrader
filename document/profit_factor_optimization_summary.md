# プロフィットファクター最適化の総括

## 概要

本ドキュメントでは、短期ボリンジャーバンド＋RSI戦略のプロフィットファクター最適化プロセスとその結果をまとめます。中間目標であるプロフィットファクター1.5を達成するために、複数の戦略バージョンを実装・テストし、最終的に目標を大きく上回るプロフィットファクター1.90を達成しました。

## 最適化プロセス

### 1. 改良版短期戦略（ベースライン）

最初の改良版短期戦略では、以下のパラメータを使用しました：

| パラメータ | 値 | 説明 |
| --- | --- | --- |
| bb_dev | 1.6 | ボリンジャーバンド幅 |
| rsi_upper | 55 | RSI上限閾値 |
| rsi_lower | 45 | RSI下限閾値 |
| sl_pips | 3.0 | 損切り幅 |
| tp_pips | 7.5 | 利確幅 |
| リスク・リワード比 | 1:2.5 | 損切り:利確の比率 |

**結果（2025年）**：
- トレード数: 174
- 勝率: 31.03%
- プロフィットファクター: 1.27
- 純利益: 62.43
- 1日あたりの平均取引回数: 1.36

### 2. バランス最適化版短期戦略

バランス最適化版では、以下のパラメータを調整しました：

| パラメータ | 値 | 説明 |
| --- | --- | --- |
| bb_dev | 1.7 | ボリンジャーバンド幅を適度に広げる |
| rsi_upper | 65 | RSI閾値を調整（強い過買い状態でのみ売り） |
| rsi_lower | 35 | RSI閾値を調整（強い過売り状態でのみ買い） |
| sl_pips | 3.0 | 損切り幅は維持 |
| tp_pips | 10.5 | 利確幅を拡大 |
| リスク・リワード比 | 1:3.5 | 損切り:利確の比率を改善 |
| trend_filter | True | トレンドフィルターを有効化 |

**結果（2025年）**：
- トレード数: 197
- 勝率: 21.32%
- プロフィットファクター: 1.05
- 純利益: 16.01
- 1日あたりの平均取引回数: 1.77

### 3. 最終PF最適化版短期戦略

最終PF最適化版では、以下のパラメータをさらに調整しました：

| パラメータ | 値 | 説明 |
| --- | --- | --- |
| bb_dev | 1.7 | ボリンジャーバンド幅を維持 |
| rsi_upper | 70 | RSI閾値をさらに厳格化（非常に強い過買い状態でのみ売り） |
| rsi_lower | 30 | RSI閾値をさらに厳格化（非常に強い過売り状態でのみ買い） |
| sl_pips | 2.5 | 損切り幅を縮小 |
| tp_pips | 12.5 | 利確幅を大幅に拡大 |
| リスク・リワード比 | 1:5 | 損切り:利確の比率を大幅に改善 |
| trend_filter | True | 3本の移動平均線によるトレンドフィルターを強化 |
| 価格アクション確認 | 追加 | 3本連続の同方向の動きを確認 |

**結果（2025年）**：
- トレード数: 78
- 勝率: 20.51%
- プロフィットファクター: 1.90
- 純利益: 113.71
- 1日あたりの平均取引回数: 0.70

## 主な発見と最適化ポイント

### 1. リスク・リワード比の重要性

プロフィットファクター向上に最も効果的だったのは、リスク・リワード比の改善です：
- 改良版: 1:2.5（SL:3.0, TP:7.5）
- バランス最適化版: 1:3.5（SL:3.0, TP:10.5）
- 最終PF最適化版: 1:5（SL:2.5, TP:12.5）

リスク・リワード比を1:5に拡大することで、勝率が低くても高いプロフィットファクターを達成できました。

### 2. シグナル品質と取引頻度のトレードオフ

シグナル品質を高めるためにフィルターを強化すると、取引頻度は低下します：
- 改良版: 174トレード（1.36回/日）
- バランス最適化版: 197トレード（1.77回/日）
- 最終PF最適化版: 78トレード（0.70回/日）

最終PF最適化版では取引頻度が大幅に低下しましたが、シグナル品質が向上し、プロフィットファクターが大幅に改善しました。

### 3. RSI閾値の最適化

RSI閾値を極端な値に設定することで、より強い過買い/過売り状態でのみ取引するようになりました：
- 改良版: 45/55
- バランス最適化版: 35/65
- 最終PF最適化版: 30/70

RSI閾値を30/70に設定することで、非常に強い過買い/過売り状態でのみ取引するようになり、シグナル品質が向上しました。

### 4. トレンドフィルターの強化

複数の移動平均線を使用したトレンドフィルターを導入することで、トレンドに逆らう取引を排除しました：
- 改良版: トレンドフィルターなし
- バランス最適化版: 短期/中期の移動平均線によるトレンドフィルター
- 最終PF最適化版: 短期/中期/長期の移動平均線によるトレンドフィルター

3本の移動平均線（5日、20日、50日）がすべて同じ方向に揃っている場合のみ取引することで、トレンドに沿った取引のみを行うようになりました。

### 5. 価格アクションの確認

最終PF最適化版では、3本連続の同方向の動きを確認する価格アクションフィルターを導入しました：
- 買いシグナルの場合: 3本連続の下落を確認
- 売りシグナルの場合: 3本連続の上昇を確認

これにより、反転の可能性が高い状況でのみ取引するようになり、シグナル品質が向上しました。

## 結論

短期ボリンジャーバンド＋RSI戦略のプロフィットファクター最適化プロセスを通じて、以下の重要な知見を得ました：

1. **リスク・リワード比の最適化**: プロフィットファクター向上には、リスク・リワード比の改善が最も効果的です。損切り幅を縮小し、利確幅を拡大することで、勝率が低くても高いプロフィットファクターを達成できます。

2. **シグナル品質の向上**: RSI閾値の厳格化、トレンドフィルターの強化、価格アクションの確認などにより、シグナル品質を向上させることができます。取引頻度は低下しますが、プロフィットファクターは大幅に改善します。

3. **取引頻度とプロフィットファクターのバランス**: 取引頻度を維持しながらプロフィットファクターを向上させることは難しく、トレードオフの関係にあります。目標に応じて適切なバランスを見つける必要があります。

最終PF最適化版短期戦略は、中間目標であるプロフィットファクター1.5を大きく上回るプロフィットファクター1.90を達成しました。今後は、勝率の向上（目標：70%以上）とプロフィットファクターのさらなる向上（目標：2.0以上）を目指すことをお勧めします。

## 今後の改善方向性

1. **市場環境に応じた動的パラメータ調整**: 市場のボラティリティや時間帯に応じてRSI閾値やボリンジャーバンド幅を動的に調整することで、さらなる改善が期待できます。

2. **複合指標の開発**: RSI、ボリンジャーバンド、移動平均線などの複数の指標を組み合わせた複合指標を開発することで、より高品質なシグナルを生成できる可能性があります。

3. **勝率向上のための追加フィルター**: 特定の時間帯や曜日に限定する、特定の価格パターンを検出するなど、勝率向上のための追加フィルターを検討することをお勧めします。

4. **ポジションサイズ管理の最適化**: 連続損失時のポジションサイズ削減や連続勝利時のポジションサイズ増加など、より洗練されたポジションサイズ管理を導入することで、リスク管理を強化できます。
