# デュアル時間足ボリンジャーバンド＋RSI戦略の分析

## 概要

本ドキュメントでは、短期戦略（1分足+15分足）と長期戦略（1時間足+4時間足）を組み合わせたデュアル戦略の分析結果をまとめます。この戦略は、取引頻度を高めながらも高い勝率とプロフィットファクターを維持することを目的としています。

## 戦略の特徴

### 短期戦略（1分足+15分足）
- **目的**: 頻繁な取引機会を生成し、小さな利益を積み重ねる
- **特徴**: 
  - RSI閾値を緩和（35/65）して取引機会を増やす
  - ボリンジャーバンド幅を狭める（標準偏差1.4）
  - 損切り・利確幅を小さくする（3.0/6.0 pips）
  - 1分足の重みを大きくする（1分足:3.0、15分足:1.0）
  - トレンドフィルターとボラティリティフィルターを無効化
  - 時間フィルターは有効化（効果的な時間帯に限定）

### 長期戦略（1時間足+4時間足）
- **目的**: 少ない取引で大きな利益を得る
- **特徴**:
  - RSI閾値を厳格化（20/80）して高品質シグナルに限定
  - ボリンジャーバンド幅を広める（標準偏差2.0）
  - 損切り・利確幅を大きくする（10.0/25.0 pips）
  - 4時間足の重みを大きくする（1時間足:1.0、4時間足:3.0）
  - 各種フィルターを有効化して高品質シグナルに限定

### デュアル戦略の資金管理
- 短期戦略に総資金の30%を配分
- 長期戦略に総資金の70%を配分
- 短期戦略の最大同時ポジション数: 2
- 長期戦略の最大同時ポジション数: 1
- 合計最大同時ポジション数: 3

## 実装内容

### 1. 1分足データ処理
- 1分足データを処理し、テクニカル指標を追加するスクリプト（process_1min_data.py）を実装
- 既存のデータ処理パイプラインを拡張して1分足データをサポート

### 2. 短期戦略クラス
- ShortTermBollingerRsiStrategyクラスを実装
- 1分足と15分足を組み合わせた超短期戦略
- RSI閾値を緩和（35/65）して取引機会を増加
- 小さな利益を狙うための最適化パラメータ設定

### 3. 長期戦略クラス
- LongTermBollingerRsiStrategyクラスを実装
- 1時間足と4時間足を組み合わせた長期戦略
- RSI閾値を厳格化（20/80）して高品質シグナルに限定
- 大きな利益を狙うための最適化パラメータ設定

### 4. デュアル戦略マネージャー
- DualStrategyManagerクラスを実装
- 短期戦略と長期戦略を統合的に管理
- 資金配分と最大ポジション数の制御
- 各戦略のシグナル生成と統合

### 5. バックテストスクリプト
- 短期戦略のバックテストスクリプト（test_short_term_strategy.py）
- 長期戦略のバックテストスクリプト（test_long_term_strategy.py）
- デュアル戦略のバックテストスクリプト（test_dual_strategy.py）

## 期待される結果

### 短期戦略（1分足+15分足）
- **取引頻度**: 平均3-5回/日
- **勝率**: 50-60%
- **プロフィットファクター**: 1.2-1.5
- **純利益**: 小さいが安定した利益

### 長期戦略（1時間足+4時間足）
- **取引頻度**: 平均1-2回/週
- **勝率**: 60-70%
- **プロフィットファクター**: 1.5-2.0
- **純利益**: 大きな利益を狙う

### デュアル戦略（短期+長期）
- **取引頻度**: 平均3-5回/日
- **勝率**: 55-65%
- **プロフィットファクター**: 1.3-1.8
- **純利益**: 短期と長期の利益を組み合わせた安定した成長

## 改善の方向性

1. **パラメータの最適化**
   - バックテスト結果に基づいてRSI閾値やボリンジャーバンド幅を調整
   - 損切り・利確レベルの最適化

2. **資金配分の調整**
   - 短期戦略と長期戦略の資金配分比率の最適化
   - 各戦略のパフォーマンスに応じた動的な資金配分

3. **フィルターの調整**
   - 短期戦略のフィルター設定の最適化
   - 長期戦略のフィルター設定の最適化

4. **時間足の組み合わせの最適化**
   - 短期戦略の1分足と15分足の重み付けの調整
   - 長期戦略の1時間足と4時間足の重み付けの調整

## 結論

デュアル戦略アプローチは、取引頻度を高めながらも高い勝率とプロフィットファクターを維持するという目標に対して効果的な解決策となることが期待されます。短期戦略は頻繁な取引機会を提供し、長期戦略は大きな利益を狙うという役割分担により、総合的なパフォーマンスの向上が見込まれます。

バックテスト結果に基づいて、パラメータの最適化や資金配分の調整を行うことで、目標の勝率70%以上、プロフィットファクター2.0以上の達成を目指します。
