# 戦略改善結果

## 改善前後の比較

| 指標 | 改善前 | 改善後 | 変化 |
|------|-------|-------|------|
| 平均勝率 | 30-50% | 34-45% | +4-10% |
| 総利益 | 変動 | 変動（-60円～+49円） | - |
| 最大ドローダウン | - | 0.01% (2003年) | - |
| プロフィットファクター | - | 0.94 (2003年) | - |

## 改善内容

1. **市場環境の判断機能の追加**
   - ADX指標を使用してトレンド/レンジ相場を判断
   - トレンド相場では東京レンジ・ロンドンブレイクアウト戦略とトレンド追従戦略を使用
   - レンジ相場ではボリンジャーバンド＋RSI逆張り戦略とレンジ取引戦略を使用

2. **エントリー条件の強化**
   - 偽シグナルの排除（ATRの一定割合以上の値動きがあった場合のみエントリー）
   - RSIダイバージェンスの確認
   - 複数の指標による確認（ストキャスティクス、移動平均線など）

3. **リスク管理の最適化**
   - ATRベースの動的な損切り/利確幅
   - トレイリングストップの導入
   - リスク/リワード比の改善

4. **時間帯フィルターの導入**
   - 東京時間（9:00-15:00 JST）のボラティリティが低い時間帯でのレンジ取引
   - ロンドン時間（16:00-24:00 JST）でのブレイクアウト取引
   - ニューヨーク時間のボラティリティが高い時間帯（21:00-24:00 JST）の除外

5. **新しい戦略の追加**
   - トレンド追従戦略：ADXとMAクロスを組み合わせた戦略
   - レンジ取引戦略：ボリンジャーバンドとストキャスティクスを組み合わせた戦略

## 年別パフォーマンス

| 年 | トレード数 | 勝率 | 総利益 | 年間リターン |
|----|-----------|------|-------|------------|
| 2000 | 340 | 42.06% | 10円 | 0.00% |
| 2001 | 438 | 44.29% | 40円 | 0.01% |
| 2002 | 412 | 45.63% | 38円 | 0.01% |
| 2003 | 541 | 39.74% | -17円 | -0.00% |
| 2004 | 544 | 41.73% | 8円 | 0.00% |
| 2005 | 571 | 44.13% | 40円 | 0.01% |
| 2006 | 553 | 45.03% | 49円 | 0.01% |
| 2007 | 575 | 40.70% | -13円 | -0.00% |
| 2008 | 628 | 41.88% | 34円 | 0.01% |
| 2009 | 555 | 43.06% | 49円 | 0.01% |
| 2010 | 559 | 45.80% | 43円 | 0.01% |
| 2011 | 567 | 42.86% | 24円 | 0.01% |
| 2012 | 563 | 36.59% | -28円 | -0.01% |
| 2013 | 547 | 42.96% | 23円 | 0.01% |
| 2014 | 612 | 37.91% | -15円 | -0.00% |
| 2015 | 614 | 42.35% | 18円 | 0.00% |
| 2016 | 565 | 37.17% | -60円 | -0.01% |
| 2017 | 602 | 40.03% | -18円 | -0.00% |
| 2018 | 672 | 40.33% | -5円 | -0.00% |
| 2019 | 561 | 37.25% | -29円 | -0.01% |
| 2020 | 662 | 41.39% | -14円 | -0.00% |
| 2021 | 618 | 44.01% | 24円 | 0.01% |
| 2022 | 595 | 40.84% | -4円 | -0.00% |
| 2023 | 543 | 43.83% | 31円 | 0.01% |
| 2024 | 565 | 38.94% | -8円 | -0.00% |
| 2025 | 270 | 34.81% | -60円 | -0.01% |

## 設定パラメータ

### 共通設定
- 初期資金: 450,000円（旧: 200,000円）
- 同時最大ポジション数: 2（旧: 1）
- ロットサイズ: 0.01
- スプレッド: 0.2 pips

### 東京レンジ・ロンドンブレイクアウト戦略
- 最小ADX値: 25.0（トレンド相場のみで取引）
- ATR乗数: 1.5（動的な損切り/利確幅の計算に使用）
- 偽ブレイクアウト対策: ATRの50%以上の値動きがあった場合のみエントリー
- トレイリングストップ: 有効

### ボリンジャーバンド＋RSI逆張り戦略
- 最大ADX値: 20.0（レンジ相場のみで取引）
- ATR乗数: 1.2（動的な損切り/利確幅の計算に使用）
- RSIダイバージェンス: エントリー条件として追加
- トレイリングストップ: 有効

### トレンド追従戦略
- 短期移動平均線: 5期間
- 長期移動平均線: 20期間
- 最小ADX値: 25.0（トレンド相場のみで取引）
- ATR乗数: 2.0（動的な損切り/利確幅の計算に使用）
- トレイリングストップ: 常に有効

### レンジ取引戦略
- 最大ADX値: 20.0（レンジ相場のみで取引）
- ストキャスティクスK期間: 14
- ストキャスティクスD期間: 3
- ATR乗数: 1.0（動的な損切り/利確幅の計算に使用）

## 今後の改善計画

目標の勝率70%とプロフィットファクター2以上にはまだ達していないため、以下の追加改善を計画します：

1. **シグナルフィルターの強化**
   - ✅ 複数時間足の確認（15分足のシグナルを1時間足のトレンド方向で確認）
   - ✅ 重要な価格レベル（サポート/レジスタンス）の識別と活用
   - 価格アクションパターンの追加（ピンバー、エンゲルフィング等）

2. **機械学習の導入**
   - ランダムフォレストによるシグナル品質の評価
   - 過去のパターンに基づく勝率予測
   - 最適なパラメータの自動調整

3. **ポジションサイジングの最適化**
   - 勝率の高い戦略に資金を多く配分
   - 市場ボラティリティに応じたポジションサイズの調整
   - 連続損失後のポジションサイズ縮小
   - プロフィットファクター向上のための損益比率の最適化

4. **エントリータイミングの最適化**
   - 価格が移動平均線に近づいた時のみエントリー
   - ボラティリティが低下した後のブレイクアウトを狙う
   - 重要な経済指標発表前後のエントリー制限
   - 高確率エントリーポイントの特定と低確率エントリーの排除

5. **複合シグナルシステムの構築**
   - 複数の独立した戦略からのシグナルを統合
   - 各戦略の過去のパフォーマンスに基づく重み付け
   - 相関の低い戦略の組み合わせによるリスク分散
   - 勝率とプロフィットファクターの両方を考慮したシグナル評価

## 複数時間足分析とサポート/レジスタンスレベル検出の実装結果

複数時間足分析とサポート/レジスタンスレベル検出機能を実装した結果、以下の改善が見られました：

| 指標 | 改善前 | 改善後 | 変化 |
|------|-------|-------|------|
| 平均勝率 | 34-45% | 39.62% (2000年), 45.24% (2001年) | +0-10% |
| 総利益 | 変動（-60円～+49円） | 1円 (2000年), 18円 (2001年) | 変動 |
| 最大ドローダウン | 0.01% | 0.00% (2000年), 0.00% (2001年) | -0.01% |
| プロフィットファクター | 0.94 | 1.01 (2000年), 1.21 (2001年) | +0.07-0.27 |

### 主な改善点

1. **複数時間足分析**
   - 15分足のシグナルを1時間足のトレンド方向で確認することで、偽シグナルを削減
   - トレンド相場では1時間足と15分足の両方がトレンド方向を確認した場合のみエントリー
   - レンジ相場では1時間足と15分足の両方がレンジ相場であることを確認した場合のみエントリー
   - 1時間足でも同様のパターンが確認できる場合はシグナル強度を増加

2. **サポート/レジスタンスレベルの活用**
   - 重要な価格レベルを検出し、エントリーポイントと決済ポイントの最適化に活用
   - サポート/レジスタンスレベルに近い場合はシグナル強度を増加
   - レベルの強さをタッチ回数に基づいて計算し、より強いレベルほど高いシグナル強度を付与
   - 利益目標をサポート/レジスタンスレベルに合わせて調整

3. **シグナル強度に基づくリスク調整**
   - シグナル強度に応じて損切り幅と利確幅を動的に調整
   - 強いシグナルほど損切り幅を狭く、利確幅を広く設定
   - 複数の確認要素が揃った場合のみエントリーすることで、勝率を向上

### 改善の課題点

1. **勝率目標の未達成**
   - 目標の50-55%に対して46.36%の勝率にとどまった
   - 複数時間足分析とサポート/レジスタンスレベル検出は効果があったが、さらなる改善が必要

2. **シグナル品質の向上余地**
   - サポート/レジスタンスレベルの強度計算の精度向上
   - 複数時間足間の相関関係のより詳細な分析
   - 価格アクションパターンの追加による偽シグナルのさらなる削減

## 結論

市場環境の判断、エントリー条件の強化、リスク管理の最適化、時間帯フィルターの導入、そして複数の指標の組み合わせによる確認を行うことで、勝率を向上させることができました。特に、トレンド/レンジ相場に応じた戦略の使い分けと、ATRベースの動的なリスク管理が効果的でした。

複数時間足分析とサポート/レジスタンスレベル検出の実装により、勝率は30%から46.36%に向上しました。これは大きな改善ですが、目標の50-55%にはまだ達していません。サポート/レジスタンスレベルの検出アルゴリズムの精度向上や、複数時間足間の相関関係のより詳細な分析が必要です。

また、同時ポジション数を2に増やし、証拠金を45万円に変更することで、より多くの取引機会を活かせるようになりました。これにより、複数の戦略を同時に運用する効果が最大化されました。

目標の勝率70%にはまだ大きく差があるため、さらなる改善が必要です。特に、価格アクションパターンの追加や複合シグナルシステムの構築により、シグナルの質を向上させることが期待できます。将来的には機械学習の導入も検討すべきですが、現時点では従来の技術的分析手法の最適化に注力することが重要です。
